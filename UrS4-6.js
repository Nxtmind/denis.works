var galleryInfo = [
  {
    name: "CH",
    brand: "BBS",
    size: "18",
    username: "",
    body: "UrS6avant",
    image: "  https://12v.org/wheel_gallery/images/BBS-CH-1273812655.jpg",
  },
  {
    name: "A16",
    brand: "ABT",
    size: "17",
    username: "",
    body: "UrS6sedan",
    image: "https://12v.org/wheel_gallery/images/ABT-A16-1225509921.jpg",
  },
  {
    name: "A24",
    brand: "ABT",
    size: "17",
    username: "",
    body: "UrS4sedan",
    image: "https://12v.org/wheel_gallery/images/ABT-A24-1274338113.jpg",
  },
  {
    name: "B6 A4 Sport",
    brand: "Audi",
    size: "17",
    username: "",
    body: "UrS4sedan",
    image:
      "https://12v.org/wheel_gallery/images/Audi%20(OEM)-B5%20A4%20Sport-1468318114.jpg",
  },
  {
    name: "B5 Celebration",
    brand: "Audi",
    size: "17",
    username: "",
    body: "UrS4sedan",
    image:
      "https://12v.org/wheel_gallery/images/Audi%20(OEM)-Celebration-1225575861.jpg",
  },
  {
    name: "RK",
    brand: "BBS",
    size: "17",
    username: "",
    body: "UrS4sedan",
    image: "https://12v.org/wheel_gallery/images/BBS-RK-1374504614.jpg",
  },
  {
    name: "S design",
    brand: "Avant Garde",
    size: "17",
    username: "",
    body: "UrS4sedan",
    image:
      "https://bringatrailer.com/wp-content/uploads/2024/02/1993_audi_s4_Small_AUDi-S4_00136-03996.jpg",
  },
  {
    name: "C4 S6 Fuchs ",
    brand: "Audi",
    size: "16",
    username: "",
    body: "UrS4sedan",
    image:
      "https://12v.org/wheel_gallery/images/Audi%20(OEM)-Avus%20(UrS6)-1225567990.jpg",
  },
  {
    name: "C4 Bolero ",
    brand: "Audi",
    size: "17",
    username: "",
    body: "UrS6avant",
    image:
      "https://12v.org/wheel_gallery/images/Audi%20(OEM)-Bolero-1225516652.jpg",
  },
  {
    name: "D2 Flat Five ",
    brand: "Audi",
    size: "18",
    username: "",
    body: "UrS6sedan",
    image:
      "https://12v.org/wheel_gallery/images/Audi%20(OEM)-Flat%20Five%20(D3%20A8L)-1367860524.jpg",
  },
  {
    name: "C5 RS6 5 spoke",
    brand: "Audi",
    size: "19",
    username: "",
    body: "UrS4sedan",
    image:
      "https://12v.org/wheel_gallery/images/Audi%20(OEM)-RS6%20(5%20Spoke)-1225575181.jpg",
  },
  {
    name: "FM5",
    brand: "Fikse",
    size: "17",
    username: "",
    body: "UrS6sedan",
    image: "https://12v.org/wheel_gallery/images/Fikse-FM5-1225568743.jpg",
  },
  {
    name: "FM10",
    brand: "Fikse",
    size: "17",
    username: "",
    body: "UrS6avant",
    image: "https://12v.org/wheel_gallery/images/Fikse-FM10-1225568776.jpg",
  },
  {
    name: "Crono",
    brand: "OZ",
    size: "18",
    username: "",
    body: "UrS4sedan",
    image: "https://12v.org/wheel_gallery/images/OZ--1252533680.jpg",
  },
  {
    name: "C4 S6 Fuchs",
    brand: "Audi",
    size: "16",
    username: "",
    body: "UrS4avant",
    image:
      "https://i2.wp.com/audiclubna.org/wp-content/uploads/FOTD-C4-S4-Avant.jpg",
  },
  {
    name: "RS",
    brand: "BBS",
    size: "16",
    username: "",
    body: "UrS4avant",
    image: "https://handsomeliving.files.wordpress.com/2012/02/d6f778fa.jpg",
  },
  {
    name: "S8 Avus",
    brand: "Audi",
    size: "18",
    username: "",
    body: "UrS4sedan",
    image:
      "https://12v.org/wheel_gallery/images/Audi%20(OEM)-Avus%20(S8)-1225517673.jpg",
  },
  {
    name: "Z",
    brand: "ABT",
    size: "18",
    username: "",
    body: "UrS6avant",
    image: "https://12v.org/wheel_gallery/images/ABT-Z-1225509799.jpg",
  },
  {
    name: "AR1",
    brand: "ASA",
    size: "18",
    username: "",
    body: "UrS4sedan",
    image: "https://12v.org/wheel_gallery/images/ASA-AR1-1480480893.jpeg",
  },
  {
    name: "C4 S6 Fuchs",
    brand: "Audi",
    size: "16",
    username: "",
    body: "UrS6avant",
    image:
      "https://12v.org/wheel_gallery/images/AT%20Italia-Propellar-1393520932.jpg",
  },
  {
    name: "C5 S6 Avus",
    brand: "Audi",
    size: "17",
    username: "",
    body: "UrS6sedan",
    image:
      "https://12v.org/wheel_gallery/images/Audi%20(OEM)-Avus%20(C5%20S6)-1331651167.jpg",
  },
  {
    name: "B5 S4 Avus",
    brand: "Audi",
    size: "17",
    username: "",
    body: "UrS4sedan",
    image:
      "https://12v.org/wheel_gallery/images/Audi%20(OEM)-Avus%20(B5%20S4)-1273840719.jpg",
  },
  {
    name: "B6 S4 Avus",
    brand: "Audi",
    size: "18",
    username: "",
    body: "UrS6avant",
    image:
      "https://12v.org/wheel_gallery/images/Audi%20(OEM)-Avus%20(B6%20S4)-1285730966.jpg",
  },
  {
    name: "C5 4.2 Fat Five",
    brand: "Audi",
    size: "18",
    username: "",
    body: "UrS6avant",
    image:
      "https://12v.org/wheel_gallery/images/Audi%20(OEM)-C5%20A6%204.2%20(Fat%205)-1274246948.jpg",
  },
  {
    name: "Euro TTS Sport",
    brand: "Audi",
    size: "18",
    username: "",
    body: "UrS6sedan",
    image:
      "https://12v.org/wheel_gallery/images/Audi%20(OEM)-Euro%20TT%20Sport-1225574786.jpg",
  },
  {
    name: "C4 S6 Plus",
    brand: "Audi",
    size: "18",
    username: "",
    body: "UrS4sedan",
    image:
      "https://12v.org/wheel_gallery/images/Audi%20(OEM)-S6%20Plus-1225575985.jpg",
  },
  {
    name: "C4 S6 Plus",
    brand: "Audi",
    size: "18",
    username: "",
    body: "UrS6avant",
    image:
      "https://12v.org/wheel_gallery/images/Audi%20(OEM)-S6%20Plus-1274246719.jpg",
  },
  {
    name: "C5 RS6 5 Spoke",
    brand: "Audi",
    size: "19",
    username: "",
    body: "UrS4avant",
    image:
      "https://12v.org/wheel_gallery/images/Audi%20(OEM)-RS6%20(5%20Spoke)-1225575255.jpg",
  },
  {
    name: "C4 Speedline",
    brand: "Audi",
    size: "15",
    username: "",
    body: "UrS4sedan",
    image:
      "https://12v.org/wheel_gallery/images/Audi%20(OEM)-Speedline-1285731257.JPG",
  },
  {
    name: "CH",
    brand: "BBS",
    size: "17",
    username: "",
    body: "UrS6sedan",
    image: "https://12v.org/wheel_gallery/images/BBS-CH-1225578256.jpg",
  },
  {
    name: "CH",
    brand: "BBS",
    size: "17",
    username: "",
    body: "UrS6sedan",
    image: "https://12v.org/wheel_gallery/images/BBS-CH-1273812623.jpg",
  },
];

const galleryItemTemplate =
  document.querySelector("#grid-template").content.firstElementChild;
const wheelGalleryList = document.querySelector("#gallery-grid");

function getGalleryItem(wheelData) {
  const galleryItem = galleryItemTemplate.cloneNode(true);
  const galleryItemName = galleryItem.querySelector("#wheelname");
  const galleryItemSize = galleryItem.querySelector("#wheelsize");
  const galleryItemUser = galleryItem.querySelector("#username");

  let wheelImageTemp = wheelData.image.replace(/\(/g, "%28");
  wheelImageTemp = wheelImageTemp.replace(/\)/g, "%29");

  galleryItem.style.backgroundImage = "url(" + wheelImageTemp + ")";
  galleryItemName.textContent = wheelData.brand + " " + wheelData.name;
  galleryItemSize.textContent = wheelData.size + '"';
  galleryItemUser.textContent = wheelData.username;

  galleryItem.dataset.size = wheelData.size;
  galleryItem.dataset.brand = wheelData.brand;
  galleryItem.dataset.body = wheelData.body;

  return galleryItem;
}

galleryInfo.forEach((item) => {
  wheelGalleryList.append(getGalleryItem(item));
});

var htmlGalleryItems = wheelGalleryList.querySelectorAll("#gallery-item");

var boxesChecked = 0;

function areAnyCheckboxesChecked(category) {
  const container = document.getElementById(category);
  const checkboxes = container.querySelectorAll('input[type="checkbox"]');
  for (let i = 0; i < checkboxes.length; i++) {
    if (checkboxes[i].checked) {
      return true;
    }
  }
  return false;
}

function howManyCategoriesChecked(){
  return [areAnyCheckboxesChecked("size"), areAnyCheckboxesChecked("brand"), areAnyCheckboxesChecked("body")].filter(Boolean).length;
}

function whichCategoriesChecked() {
  function areAnyCheckboxesChecked(category) {
    const container = document.getElementById(category);
    const checkboxes = container.querySelectorAll('input[type="checkbox"]');
    for (let i = 0; i < checkboxes.length; i++) {
      if (checkboxes[i].checked) {
        return true;
      }
    }
    return false;
  }

  var listCheckedCategories = [ 
    {
      type: "body",
      value: areAnyCheckboxesChecked("body")
    },
    {
      type: "size",
      value: areAnyCheckboxesChecked("size")
    },{
      type: "brand",
      value: areAnyCheckboxesChecked("brand")
    }
  ]
  return listCheckedCategories;
}

//main checkbox initializer
document.querySelector(".wheelfinder__selector").onclick = function (e) {
  //   console.log(e.target.checked, e.target.value, e.target.dataset.categ);
  wheelGalleryList.classList.add("filtered");
  
  // ITEM CHECKED
  if (e.target.checked === true) {
    // console.log(e.target.value);
    // console.log(e.target.dataset.categ);
    boxesChecked += 1;
    //SIZE CHECK
    if(e.target.dataset.categ === "size"){ //if you clicked on a size button
      wheelFinderImageCheck();
      htmlGalleryItems.forEach((item) => { // cycles through every item in the gallery
        item.style.display = ""; //clear display value of all items
        if(e.target.value === item.dataset.size){ //if the object has the correct corresponding value to the checkbox
          item.dataset.sizefilter = "true"; // "size has been filtered" will be tagged
        }
        if(item.dataset.sizefilter === "true"){
          if(howManyCategoriesChecked() === 1){ // if the only category checked is size,
            item.style.display = "flex"; // and set the display of this item to SHOW
          }
          else if(howManyCategoriesChecked() === 2){ //if two categories have been checked,
            if(areAnyCheckboxesChecked("body")){ //if it's the body category
              if(item.dataset.bodyfilter === "true"){ //if there is a bodyfilter currently applied to the item (meaning it is shown if ONLY the bodyfilter is active)
                item.style.display = "flex"; // and set the display of this item to SHOW
              }
            }
            if(areAnyCheckboxesChecked("brand")){ // if instead it's the brand category that is checked,
              if(item.dataset.brandfilter === "true"){ // check if the item is currently being filtered by brand,
                item.style.display = "flex"; // and set the display of this item to SHOW
              }
            }
          }
          else{ // no "if" here, because if it's not 1 and it's not 2, it's 3 categories. it cannot be zero here because we're in an affirmative action
            if((item.dataset.brandfilter === "true") && (item.dataset.bodyfilter === "true")){ // if the item currently has two 
              item.style.display = "flex"; // show the item because it meets all the requirements
            }
          }
        }
      });
    }
    //BRAND CHECK
    else if(e.target.dataset.categ === "brand"){ //if you clicked on a brand button
      htmlGalleryItems.forEach((item) => { // cycles through every item in the gallery
        item.style.display = ""; //clear the display value of all items
        if(e.target.value === item.dataset.brand){ //if the object has the correct corresponding value to the checkbox
          item.dataset.brandfilter = "true"; // "brand has been filtered" will be tagged
        }
        if(item.dataset.brandfilter === "true"){
          if(howManyCategoriesChecked() === 1){ // if the only category checked is brand,
            item.style.display = "flex"; // and set the display of this item to SHOW
          }
          else if(howManyCategoriesChecked() === 2){ //if two categories have been checked,
            if(areAnyCheckboxesChecked("body")){ //if it's the body category
              if(item.dataset.bodyfilter === "true"){ //if there is a bodyfilter currently applied to the item (meaning it is shown if ONLY the bodyfilter is active)
                item.style.display = "flex"; // and set the display of this item to SHOW
              }
            }
            if(areAnyCheckboxesChecked("size")){ // if instead it's the size category that is checked,
              if(item.dataset.sizefilter === "true"){ // check if the item is currently being filtered by size,
                item.style.display = "flex"; // and set the display of this item to SHOW
              }
            }
          }
          else{ // no "if" here, because if it's not 1 and it's not 2, it's 3 categories. it cannot be zero here because we're in an affirmative action
            if((item.dataset.sizefilter === "true") && (item.dataset.bodyfilter === "true")){ // if the item currently has two 
              item.style.display = "flex"; // show the item because it meets all the requirements
            }
          }
        }
      });

    }
    //BODY CHECK
    else if(e.target.dataset.categ === "body"){ //if you clicked on a body button
      htmlGalleryItems.forEach((item) => { // cycles through every item in the gallery
        item.style.display = ""; //clear the display value of all items
        if(e.target.value === item.dataset.body){ //if the object has the correct corresponding value to the checkbox
          item.dataset.bodyfilter = "true"; // "body has been filtered" will be tagged
        }
        if(item.dataset.bodyfilter === "true"){
          if(howManyCategoriesChecked() === 1){ // if the only category checked is size,
            item.style.display = "flex"; // and set the display of this item to SHOW
          }
          else if(howManyCategoriesChecked() === 2){ //if two categories have been checked,
            if(areAnyCheckboxesChecked("size")){ //if it's the size category
              if(item.dataset.sizefilter === "true"){ //if there is a sizefilter currently applied to the item (meaning it is shown if ONLY the bodyfilter is active)
                item.style.display = "flex"; // and set the display of this item to SHOW
              }
            }
            if(areAnyCheckboxesChecked("brand")){ // if instead it's the brand category that is checked,
              if(item.dataset.brandfilter === "true"){ // check if the item is currently being filtered by brand,
                item.style.display = "flex"; // and set the display of this item to SHOW
              }
            }
          }
          else{ // no "if" here, because if it's not 1 and it's not 2, it's 3 categories. it cannot be zero here because we're in an affirmative action
            if((item.dataset.brandfilter === "true") && (item.dataset.sizefilter === "true")){ // if the item currently has two 
              item.style.display = "flex"; // show the item because it meets all the requirements
            }
          }
      }
      });

    }
  }
  //ITEM UNCHECKED
  if (e.target.checked === false) {
    boxesChecked -= 1;
    //SIZE CHECK
    if(e.target.dataset.categ === "size"){ //if you unchecked a size value
      wheelFinderImageCheck();
      htmlGalleryItems.forEach((item) => { //cycles through all the items
        if(e.target.value === item.dataset.size){ //if the item matches the size value you unchecked
          item.dataset.sizefilter = ""; //set the sizefilter to unfiltered. this happens regardless of future events
          if(areAnyCheckboxesChecked("size")){ //if there are still size boxes checked
            item.style.display = "" //hide these items
          }
        }
        if(!areAnyCheckboxesChecked("size")){
          if(((areAnyCheckboxesChecked("brand")) && (item.dataset.brandfilter === "true")) && ((areAnyCheckboxesChecked("body") && (item.dataset.bodyfilter === "true")) || (!areAnyCheckboxesChecked("body")))){
              item.style.display = "flex";
          }
          if(((areAnyCheckboxesChecked("body")) && (item.dataset.bodyfilter === "true")) && ((areAnyCheckboxesChecked("brand") && (item.dataset.brandfilter === "true")) || (!areAnyCheckboxesChecked("brand")))){
              item.style.display = "flex";

          }
        }
      });
    }
    //BRAND CHECK
    if(e.target.dataset.categ === "brand"){ //if you unchecked a brand value
      htmlGalleryItems.forEach((item) => { //cycles through all the items
        if(e.target.value === item.dataset.brand){ //if the item matches the brand value you unchecked
          item.dataset.brandfilter = ""; //set the brandfilter to unfiltered. this happens regardless of future events
          if(areAnyCheckboxesChecked("brand")){ //if there are still brand boxes checked
            item.style.display = "" //hide these items only
          }
        }
        if(!areAnyCheckboxesChecked("brand")){
          if(((areAnyCheckboxesChecked("size")) && (item.dataset.sizefilter === "true")) && ((areAnyCheckboxesChecked("body") && (item.dataset.bodyfilter === "true")) || (!areAnyCheckboxesChecked("body")))){ //if a brand filter is active and it matches
              item.style.display = "flex";
          }
          if(((areAnyCheckboxesChecked("body")) && (item.dataset.bodyfilter === "true")) && ((areAnyCheckboxesChecked("size") && (item.dataset.sizefilter === "true")) || (!areAnyCheckboxesChecked("size")))){
              item.style.display = "flex";
          }
        }
      });
    }
    //BODY CHECK
    if(e.target.dataset.categ === "body"){ //if you unchecked a body value
      htmlGalleryItems.forEach((item) => { //cycles through all the items
        if(e.target.value === item.dataset.body){ //if the item matches the body value you unchecked
          item.dataset.bodyfilter = ""; //set the bodyfilter to unfiltered. this happens regardless of future events
          if(areAnyCheckboxesChecked("body")){ //if there are still body boxes checked
            item.style.display = ""; //hide these items
          }
        }
        if(!areAnyCheckboxesChecked("body")){
          if(((areAnyCheckboxesChecked("size")) && (item.dataset.sizefilter === "true")) && ((areAnyCheckboxesChecked("brand") && (item.dataset.brandfilter === "true")) || (!areAnyCheckboxesChecked("brand")))){
              item.style.display = "flex";
          }
          if(((areAnyCheckboxesChecked("brand")) && (item.dataset.brandfilter === "true")) && ((areAnyCheckboxesChecked("size") && (item.dataset.sizefilter === "true")) || (!areAnyCheckboxesChecked("size")))){
              item.style.display = "flex";
          }
        }
      });
    }
    //TOTAL RESET
    if (boxesChecked === 0) {
      wheelGalleryList.classList.remove("filtered");
    }
  }
};

function wheelFinderImageCheck() {
  const wheelFinderImage = document.querySelector(".wheelfinder__size-image");

  function selectRandom(array) {
    const randomElement = array[Math.floor(Math.random() * array.length)];
    return randomElement;
  }

  function remove15() {
    wheelFinderImage.classList.remove("wheel15");
  }
  function remove16() {
    wheelFinderImage.classList.remove("wheel16");
  }
  function remove17() {
    wheelFinderImage.classList.remove("wheel17");
  }
  function remove18() {
    wheelFinderImage.classList.remove("wheel18");
  }
  function remove19() {
    wheelFinderImage.classList.remove("wheel19");
  }

  if (boxesChecked >= 1 && areAnyCheckboxesChecked("size")) {
    if (wheelFinderImage.classList.contains("wheel16")) {
      remove16();
      wheelFinderImage.classList.add(
        selectRandom(["wheel15", "wheel17", "wheel18", "wheel19"]),
      );
    } 
    else if (wheelFinderImage.classList.contains("wheel15")) {
      remove15();
      wheelFinderImage.classList.add(
        selectRandom(["wheel16", "wheel17", "wheel18", "wheel19"]),
      );
    } else if (wheelFinderImage.classList.contains("wheel17")) {
      remove17();
      wheelFinderImage.classList.add(
        selectRandom(["wheel18", "wheel19", "wheel16", "wheel15"]),
      );
    } else if (wheelFinderImage.classList.contains("wheel18")) {
      remove18();
      wheelFinderImage.classList.add(
        selectRandom(["wheel19", "wheel16", "wheel17", "wheel15"]),
      );
    } else if (wheelFinderImage.classList.contains("wheel19")) {
      remove19();
      wheelFinderImage.classList.add(
        selectRandom(["wheel16", "wheel17", "wheel18", "wheel15"]),
      );
    } else {
      wheelFinderImage.classList.add(
        selectRandom(["wheel16", "wheel17", "wheel18", "wheel19", "wheel15"]),
      );
    }
  }
  else if (size15.checked) {
    remove16();
    remove17();
    remove18();
    remove19();
    wheelFinderImage.classList.add("wheel15");
  }
   else if (size16.checked) {
    remove15();
    remove17();
    remove18();
    remove19();
    wheelFinderImage.classList.add("wheel16");
  } else if (size17.checked) {
    remove15();
    remove16();
    remove18();
    remove19();
    wheelFinderImage.classList.add("wheel17");
  } else if (size18.checked) {
    remove15();
    remove16();
    remove17();
    remove19();
    wheelFinderImage.classList.add("wheel18");
  } else if (size19.checked) {
    remove15();
    remove16();
    remove17();
    remove18();
    wheelFinderImage.classList.add("wheel19");
  } else {
    remove15();
    remove16();
    remove17();
    remove18();
    remove19();
  }
}

function resetForm() {
  document.querySelector(".wheelfinder__selector").reset();
  wheelGalleryList.classList.remove("filtered");
  htmlGalleryItems.forEach((item) => {
    item.style.display = "";
    item.dataset.bodyfilter = "";
    item.dataset.sizefilter = "";
    item.dataset.brandfilter = "";
  });
  boxesChecked = 0;
  wheelFinderImageCheck();
}